<!DOCTYPE html>

<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç§»å‹•å¼æ‹æ„›ãƒ¯ã‚´ãƒ³ PMF ver.2</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

```
    body {
        font-family: 'Hiragino Kaku Gothic Pro', 'Meiryo', sans-serif;
        background: linear-gradient(135deg, #56ab2f 0%, #a8e063 100%);
        min-height: 100vh;
        padding: 20px;
    }
    
    .container {
        max-width: 900px;
        margin: 0 auto;
        background: white;
        border-radius: 20px;
        box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        overflow: hidden;
    }
    
    .header {
        background: linear-gradient(135deg, #f7971e 0%, #ffd200 100%);
        color: white;
        padding: 40px 30px;
        text-align: center;
    }
    
    .header h1 {
        font-size: 2.5em;
        margin-bottom: 10px;
        text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
    }
    
    .header p {
        font-size: 1.1em;
        opacity: 0.95;
    }
    
    .version {
        display: inline-block;
        background: rgba(255,255,255,0.3);
        padding: 5px 15px;
        border-radius: 20px;
        font-size: 0.9em;
        margin-top: 10px;
    }
    
    .controls {
        background: #f8f9fa;
        padding: 25px 30px;
        border-bottom: 2px solid #e9ecef;
        display: flex;
        align-items: center;
        justify-content: center;
        flex-wrap: wrap;
        gap: 15px;
    }
    
    .button {
        background: linear-gradient(135deg, #56ab2f 0%, #a8e063 100%);
        color: white;
        border: none;
        padding: 15px 40px;
        border-radius: 30px;
        font-size: 18px;
        font-weight: bold;
        cursor: pointer;
        transition: all 0.3s;
        box-shadow: 0 4px 15px rgba(86, 171, 47, 0.4);
    }
    
    .button:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(86, 171, 47, 0.6);
    }
    
    .button:active {
        transform: translateY(0);
    }
    
    .button.stop {
        background: linear-gradient(135deg, #eb3349 0%, #f45c43 100%);
    }
    
    .content {
        padding: 30px;
        max-height: 600px;
        overflow-y: auto;
    }
    
    .dialogue {
        margin: 20px 0;
        padding: 20px;
        border-radius: 15px;
        animation: fadeIn 0.6s;
        transition: all 0.3s;
    }
    
    @keyframes fadeIn {
        from { opacity: 0; transform: translateX(-20px); }
        to { opacity: 1; transform: translateX(0); }
    }
    
    .dialogue.active {
        transform: scale(1.05);
        box-shadow: 0 8px 25px rgba(0,0,0,0.15);
    }
    
    .dialogue.male {
        background: linear-gradient(135deg, #e8f5e9 0%, #c8e6c9 100%);
        margin-right: 40px;
    }
    
    .dialogue.female {
        background: linear-gradient(135deg, #fff9c4 0%, #fff59d 100%);
        margin-left: 40px;
    }
    
    .dialogue.stage {
        background: linear-gradient(135deg, #e0f2f1 0%, #b2dfdb 100%);
        text-align: center;
        font-style: italic;
        margin: 30px 0;
    }
    
    .dialogue.voice {
        background: linear-gradient(135deg, #c8e6c9 0%, #a5d6a7 100%);
        color: #1b5e20;
        margin: 15px 60px;
        font-size: 0.95em;
    }
    
    .speaker {
        font-weight: bold;
        font-size: 0.9em;
        margin-bottom: 8px;
        opacity: 0.7;
    }
    
    .male .speaker {
        color: #2e7d32;
    }
    
    .female .speaker {
        color: #f57f17;
    }
    
    .stage .speaker {
        color: #00897b;
    }
    
    .voice .speaker {
        color: #1b5e20;
        opacity: 0.9;
    }
    
    .text {
        font-size: 1.1em;
        line-height: 1.6;
    }
    
    .progress {
        height: 4px;
        background: #e9ecef;
        position: relative;
    }
    
    .progress-bar {
        height: 100%;
        background: linear-gradient(90deg, #56ab2f 0%, #a8e063 100%);
        width: 0%;
        transition: width 0.3s;
    }
    
    .info {
        background: #e8f5e9;
        padding: 20px;
        margin: 20px 0;
        border-radius: 10px;
        border-left: 4px solid #2e7d32;
    }
    
    .info h3 {
        color: #2e7d32;
        margin-bottom: 10px;
    }
    
    @media (max-width: 768px) {
        .header h1 {
            font-size: 1.8em;
        }
        
        .dialogue.male {
            margin-right: 20px;
        }
        
        .dialogue.female {
            margin-left: 20px;
        }
        
        .dialogue.voice {
            margin: 15px 30px;
        }
    }
</style>
```

</head>
<body>
    <div class="container">
        <div class="header">
            <h1>ğŸšğŸ’• ç§»å‹•å¼æ‹æ„›ãƒ¯ã‚´ãƒ³ PMF</h1>
            <p>40ä»£ç”·æ€§ãƒœã‚± Ã— 30ä»£å¥³æ€§ãƒ„ãƒƒã‚³ãƒŸ</p>
            <div class="version">Version 2.0</div>
        </div>

```
    <div class="progress">
        <div class="progress-bar" id="progressBar"></div>
    </div>
    
    <div class="controls">
        <button class="button" id="playBtn" onclick="playManzai()">â–¶ å†ç”Ÿé–‹å§‹</button>
        <button class="button stop" id="stopBtn" onclick="stopManzai()" style="display:none">â¹ åœæ­¢</button>
    </div>
    
    <div class="content" id="content">
        <div class="info">
            <h3>ğŸ“ ãƒã‚¿ã«ã¤ã„ã¦</h3>
            <p>ç§»å‹•å¼æ‹æ„›ãƒ¯ã‚´ãƒ³ç•ªçµ„ã‚’å§‹ã‚ã‚‹ã‚‚ã€å‚åŠ è€…ãŒã¤ã„ã¦ã„ã‘ãšã€ãƒ”ãƒœãƒƒãƒˆï¼ˆæ–¹å‘è»¢æ›ï¼‰ã—ã¦æ‹æ„›ç›¸è«‡ã‚«ãƒ•ã‚§ã«ã€‚PMFï¼ˆå•†å“ã¨å¸‚å ´ãŒåˆã†ç¬é–“ï¼‰é”æˆã‹ã¨æ€ã„ãã‚„â€¦ã¨ã„ã†ç‰©èªã§ã™ã€‚</p>
            <p><strong>æ‰€è¦æ™‚é–“:</strong> ç´„2åˆ†</p>
        </div>
    </div>
</div>

<script>
    const script = [
        // æ¼«æ‰ãƒ‘ãƒ¼ãƒˆï¼ˆå°å…¥ï¼‰
        { speaker: "male", text: "ã©ã†ã‚‚ãƒ¼ï¼" },
        { speaker: "female", text: "ã©ã†ã‚‚ãƒ¼ï¼" },
        { speaker: "male", text: "ãªã‚ã€ä¿ºãªã€ã‚„ã£ã¦ã¿ãŸã„æ‹æ„›ãƒãƒ©ã‚¨ãƒ†ã‚£ã‚ã‚“ã­ã‚“" },
        { speaker: "female", text: "ã¾ãŸå§‹ã¾ã£ãŸã€‚ä»Šåº¦ã¯ä½•ï¼Ÿ" },
        { speaker: "male", text: "ç§»å‹•å¼æ‹æ„›ãƒ¯ã‚´ãƒ³ã€‚ãƒ¯ã‚´ãƒ³ã§ç§»å‹•ã—ãªãŒã‚‰æ‹æ„›ã™ã‚‹ç•ªçµ„ã‚„" },
        { speaker: "female", text: "ã‚ã‚ã€ãã†ã„ã†ã®ã‚ã‚‹ãª" },
        { speaker: "male", text: "æœ€ä½é™ã®ã‚»ãƒƒãƒˆã§ãˆãˆã€‚æ¤…å­ã¨äººã ã‘ã§å§‹ã‚ã‚‹ã­ã‚“" },
        { speaker: "female", text: "ãã‚Œã‚¨ãƒ ãƒ–ã‚¤ãƒ”ãƒ¼ã‚„ãª" },
        { speaker: "male", text: "ã‚¨ãƒ ãƒ–ã‚¤ãƒ”ãƒ¼ï¼Ÿ" },
        { speaker: "female", text: "ãƒŸãƒ‹ãƒãƒ ãƒ»ãƒã‚¤ã‚¢ãƒ–ãƒ«ãƒ»ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆã€‚æœ€å°é™ã®æ©Ÿèƒ½ã§ä½œã‚‹è©¦ä½œå“ã‚„ã€‚ã¾ãšå°ã•ãå§‹ã‚ã¦ã€åå¿œè¦‹ãªãŒã‚‰æ”¹å–„ã—ã¦ã„ãã­ã‚“" },
        { speaker: "male", text: "ãã†ãã†ï¼ã˜ã‚ƒã‚ã€ã¡ã‚‡ã£ã¨ã‚„ã£ã¦ã¿ã‚ˆã‹" },
        { speaker: "female", text: "ãˆã€ä»Šã‹ã‚‰ï¼Ÿ" },
        
        // ã‚·ãƒ§ãƒ¼ãƒˆã‚³ãƒ³ãƒˆé–‹å§‹
        { speaker: "stage", text: "ã€ã‚·ãƒ§ãƒ¼ãƒˆã‚³ãƒ³ãƒˆã€Œç§»å‹•å¼æ‹æ„›ãƒ¯ã‚´ãƒ³ã€ã€‘" },
        
        // ã‚·ãƒ¼ãƒ³1ï¼šæœ€åˆã®å½¢å¼ï¼ˆçµå©šå‰æï¼‰
        { speaker: "male", text: "ï¼ˆé‹å–¶ã‚¹ã‚¿ãƒƒãƒ•å½¹ï¼‰ã¯ã„ã€ç§»å‹•å¼æ‹æ„›ãƒ¯ã‚´ãƒ³ã¸ã‚ˆã†ã“ãï¼ä»Šæ—¥ã¯çµå©šã‚’å‰æã«è©±ã—ã¦ã„ãŸã ãã¾ã™" },
        { speaker: "female", text: "ï¼ˆå‚åŠ è€…ã®å¥³æ€§å½¹ï¼‰ã‚ã€ã¯ã„ã€‚ã‚ˆã‚ã—ããŠé¡˜ã„ã—ã¾ã™" },
        { speaker: "male", text: "ã˜ã‚ƒã‚ã¾ãšã€å¹´åã¨ã‹å°†æ¥è¨­è¨ˆã¨ã‹èã„ã¦ã‚‚ã‚‰ã£ã¦ã„ã„ã§ã™ã‹" },
        { speaker: "female", text: "ãˆã€ã„ããªã‚Šï¼ï¼Ÿã¡ã‚‡ã£ã¨å¾…ã£ã¦ã€ã¾ã ä½•ã‚‚è©±ã—ã¦ãªã„ã®ã«â€¦" },
        { speaker: "male", text: "ã„ã‚„ã€çµå©šå‰æãªã‚“ã§" },
        { speaker: "female", text: "é‡ã„â€¦ã¤ã„ã¦ã„ã‘ãªã„â€¦" },
        
        // ãƒ”ãƒœãƒƒãƒˆ
        { speaker: "male", text: "ï¼ˆé€šå¸¸ã®å£°ã§ï¼‰ã‚ã€ã“ã‚Œã‚¢ã‚«ãƒ³ã‚" },
        { speaker: "female", text: "ï¼ˆé€šå¸¸ã®å£°ã§ï¼‰ä½•ãŒï¼Ÿ" },
        { speaker: "male", text: "æ–¹å‘è»¢æ›ã‚„ã€‚ãƒ”ãƒœãƒƒãƒˆã£ã¦ã„ã†ã­ã‚“" },
        { speaker: "female", text: "ãƒ”ãƒœãƒƒãƒˆï¼Ÿ" },
        { speaker: "male", text: "ã‚„ã‚Šæ–¹å¤‰ãˆã‚‹ã“ã¨ã‚„ã€‚çµå©šã®è©±ã‚„ã‚ã¦ã€æ‹æ„›ç›¸è«‡ã«ã—ã‚ˆã†" },
        { speaker: "stage", text: "ï¼ˆåŠ¹æœéŸ³ï¼šã‚¬ã‚³ãƒ³ï¼‰" },
        
        // ã‚·ãƒ¼ãƒ³2ï¼šãƒ”ãƒœãƒƒãƒˆå¾Œï¼ˆæ‹æ„›ç›¸è«‡ï¼‰
        { speaker: "male", text: "ï¼ˆé‹å–¶ã‚¹ã‚¿ãƒƒãƒ•å½¹ï¼‰ç§»å‹•å¼æ‹æ„›ç›¸è«‡ã‚«ãƒ•ã‚§ã«ãªã‚Šã¾ã—ãŸï¼æ°—è»½ã«æ‚©ã¿ç›¸è«‡ã—ã¦ãã ã•ã„" },
        { speaker: "female", text: "ï¼ˆå‚åŠ è€…å½¹ï¼‰ã‚ã€ã“ã‚Œãªã‚‰è©±ã—ã‚„ã™ã„ï¼å®Ÿã¯æœ€è¿‘â€¦" },
        { speaker: "male", text: "ã†ã‚“ã†ã‚“ã€èãã¾ã™ã‚ˆ" },
        { speaker: "female", text: "æ¯é€±æ¥ãŸã„ã§ã™ã€ã“ã‚Œï¼" },
        { speaker: "male", text: "ï¼ˆé€šå¸¸ã®å£°ã§ï¼‰æ¥ãŸâ€¦" },
        { speaker: "female", text: "ï¼ˆé€šå¸¸ã®å£°ã§ï¼‰ä½•ãŒï¼Ÿ" },
        { speaker: "male", text: "ãƒ”ãƒ¼ã‚¨ãƒ ã‚¨ãƒ•ã‚„ï¼ãƒ—ãƒ­ãƒ€ã‚¯ãƒˆãƒ»ãƒãƒ¼ã‚±ãƒƒãƒˆãƒ»ãƒ•ã‚£ãƒƒãƒˆã€‚å•†å“ã¨å¸‚å ´ãŒã´ã£ãŸã‚Šåˆã£ãŸç¬é–“ã‚„ï¼" },
        { speaker: "female", text: "ãŠãŠã€ã†ã¾ãã„ã£ãŸã‚“ã‚„" },
        
        // ã‚·ãƒ¼ãƒ³3ï¼šå–§å˜©ç™ºç”Ÿ
        { speaker: "male", text: "ï¼ˆé‹å–¶ã‚¹ã‚¿ãƒƒãƒ•å½¹ï¼‰ã˜ã‚ƒã‚æ¬¡ã®ç›¸è«‡è€…ã®æ–¹ã‚‚ã©ã†ããƒ¼" },
        { speaker: "female", text: "ï¼ˆåˆ¥ã®å‚åŠ è€…å½¹ã§æ”»æ’ƒçš„ã«ï¼‰ã‚ã®ãªã€ã•ã£ãã®ã‚¢ãƒ‰ãƒã‚¤ã‚¹ã‚ã£ã¡ã‚ƒè…¹ç«‹ã£ãŸã‚“ã‚„ã‘ã©" },
        { speaker: "male", text: "ãˆï¼Ÿ" },
        { speaker: "female", text: "ä½•ãŒã€Œæ°—æ¥½ã«è€ƒãˆãŸã‚‰ã€ã‚„ï¼ãŠå‰ã«ä½•ãŒåˆ†ã‹ã‚“ã­ã‚“ï¼" },
        { speaker: "male", text: "ã¡ã‚‡ã€å¾…ã£ã¦ã€è½ã¡ç€ã„ã¦ï¼" },
        { speaker: "stage", text: "ï¼ˆãƒ‰ãƒ³ï¼ï¼‰" },
        { speaker: "male", text: "ã‚¤ãƒ†ãƒƒï¼" },
        
        // ã‚ªãƒ
        { speaker: "stage", text: "ï¼ˆæ•‘æ€¥è»Šã®ã‚µã‚¤ãƒ¬ãƒ³ï¼šãƒ”ãƒ¼ãƒãƒ¼ãƒ”ãƒ¼ãƒãƒ¼ï¼‰" },
        { speaker: "male", text: "ï¼ˆé€šå¸¸ã®å£°ã§ï¼‰ã‚ã€ã“ã‚Œãƒ”ãƒœãƒƒãƒˆã‚„ãªãã¦" },
        { speaker: "female", text: "ãªã‚“ã‚„ã­ã‚“" },
        { speaker: "male", text: "ãƒ”ãƒ¼ãƒãƒ¼ãƒ”ãƒ¼ãƒãƒ¼ã‚„ãª" },
        { speaker: "female", text: "ã‚‚ã†ãˆãˆã‚ï¼" },
        { speaker: "male", text: "ã©ã†ã‚‚ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸãƒ¼ï¼" },
        { speaker: "female", text: "ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸãƒ¼ï¼" },
    ];

    let currentIndex = 0;
    let isPlaying = false;
    let speechSynth = window.speechSynthesis;
    
    const speakerNames = {
        male: "ç”·æ€§ï¼ˆ40ä»£ãƒ»ãƒœã‚±ï¼‰",
        female: "å¥³æ€§ï¼ˆ30ä»£ãƒ»ãƒ„ãƒƒã‚³ãƒŸï¼‰",
        stage: "ãƒˆæ›¸ã",
        voice: "å‚åŠ è€…ã®å£°"
    };

    function updateProgress() {
        const progress = (currentIndex / script.length) * 100;
        document.getElementById('progressBar').style.width = progress + '%';
    }

    function displayDialogue(index) {
        const content = document.getElementById('content');
        const item = script[index];
        
        document.querySelectorAll('.dialogue').forEach(d => d.classList.remove('active'));
        
        let dialogue = document.getElementById(`dialogue-${index}`);
        
        if (!dialogue) {
            dialogue = document.createElement('div');
            dialogue.id = `dialogue-${index}`;
            dialogue.className = `dialogue ${item.speaker}`;
            dialogue.innerHTML = `
                <div class="speaker">${speakerNames[item.speaker]}</div>
                <div class="text">${item.text}</div>
            `;
            content.appendChild(dialogue);
        }
        
        dialogue.classList.add('active');
        dialogue.scrollIntoView({ behavior: 'smooth', block: 'center' });
    }

    function speak(text, speaker) {
        return new Promise((resolve) => {
            const utterance = new SpeechSynthesisUtterance(text);
            utterance.lang = 'ja-JP';
            
            if (speaker === 'male') {
                utterance.pitch = 0.8;
                utterance.rate = 1.1;
            } else if (speaker === 'female') {
                utterance.pitch = 1.3;
                utterance.rate = 1.2;
            } else if (speaker === 'voice') {
                utterance.pitch = 1.0;
                utterance.rate = 1.0;
            } else {
                utterance.pitch = 1.0;
                utterance.rate = 0.9;
            }
            
            utterance.onend = () => {
                setTimeout(resolve, speaker === 'stage' ? 800 : 400);
            };
            
            utterance.onerror = () => {
                resolve();
            };
            
            speechSynth.speak(utterance);
        });
    }

    async function playManzai() {
        if (isPlaying) return;
        
        isPlaying = true;
        document.getElementById('playBtn').style.display = 'none';
        document.getElementById('stopBtn').style.display = 'inline-block';
        
        if (currentIndex >= script.length) {
            currentIndex = 0;
            document.getElementById('content').innerHTML = `
                <div class="info">
                    <h3>ğŸ“ ãƒã‚¿ã«ã¤ã„ã¦</h3>
                    <p>ç§»å‹•å¼æ‹æ„›ãƒ¯ã‚´ãƒ³ç•ªçµ„ã‚’å§‹ã‚ã‚‹ã‚‚ã€å‚åŠ è€…ãŒã¤ã„ã¦ã„ã‘ãšã€ãƒ”ãƒœãƒƒãƒˆï¼ˆæ–¹å‘è»¢æ›ï¼‰ã—ã¦æ‹æ„›ç›¸è«‡ã‚«ãƒ•ã‚§ã«ã€‚PMFï¼ˆå•†å“ã¨å¸‚å ´ãŒåˆã†ç¬é–“ï¼‰é”æˆã‹ã¨æ€ã„ãã‚„â€¦ã¨ã„ã†ç‰©èªã§ã™ã€‚</p>
                    <p><strong>æ‰€è¦æ™‚é–“:</strong> ç´„2åˆ†</p>
                </div>
            `;
        }
        
        while (currentIndex < script.length && isPlaying) {
            const item = script[currentIndex];
            displayDialogue(currentIndex);
            updateProgress();
            
            await speak(item.text, item.speaker);
            currentIndex++;
        }
        
        if (currentIndex >= script.length) {
            stopManzai();
        }
    }

    function stopManzai() {
        isPlaying = false;
        speechSynth.cancel();
        document.getElementById('playBtn').style.display = 'inline-block';
        document.getElementById('stopBtn').style.display = 'none';
        
        document.querySelectorAll('.dialogue').forEach(d => d.classList.remove('active'));
    }

    window.addEventListener('beforeunload', () => {
        speechSynth.cancel();
    });
</script>
```

</body>
</html>